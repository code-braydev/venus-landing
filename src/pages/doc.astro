---
import Layout from "../layouts/Layout.astro";
import QuickStart from "../components/QuickStart.astro";
import MethodReference from "../components/MethodReference.astro";
---

<Layout title="Documentation | Venus SDK">
  <div class="section-container pt-32 pb-20">
    <div class="flex flex-col lg:flex-row gap-12">
      <aside class="lg:w-64 shrink-0 sticky top-32 h-fit hidden lg:block">
        <nav class="space-y-8">
          <div>
            <h4
              class="text-xs font-bold uppercase tracking-widest text-purple-300/40 mb-4"
            >
              Getting Started
            </h4>
            <ul class="space-y-3 text-sm text-purple-100/60 font-medium">
              <li>
                <a
                  href="#quick-start"
                  class="hover:text-purple-300 transition-colors"
                  >Installation</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4
              class="text-xs font-bold uppercase tracking-widest text-purple-300/40 mb-4"
            >
              API Manual
            </h4>
            <ul class="space-y-3 text-sm text-purple-100/60 font-medium">
              <li>
                <a
                  href="#anatomy"
                  class="hover:text-purple-300 transition-colors"
                  >Response Anatomy</a
                >
              </li>
              <li>
                <a
                  href="#get"
                  class="hover:text-purple-200 flex items-center gap-1"
                >
                  get<span class="text-purple-400/50 italic text-[10px]"
                    >&lt;T&gt;</span
                  >
                </a>
              </li>
              <li>
                <a
                  href="#send"
                  class="hover:text-purple-200 flex items-center gap-1"
                >
                  send<span class="text-purple-400/50 italic text-[10px]"
                    >&lt;T&gt;</span
                  >
                </a>
              </li>
              <li>
                <a href="#update" class="hover:text-purple-200 text-xs"
                  >update / updateOnly</a
                >
              </li>
              <li>
                <a href="#remove" class="hover:text-purple-200">remove</a>
              </li>
            </ul>
          </div>
        </nav>
      </aside>

      <article class="flex-1 max-w-4xl min-w-0">
        <header class="mb-12 sm:mb-16">
          <h1 class="text-4xl sm:text-6xl font-extrabold text-white mb-6">
            Documentation
          </h1>
          <p
            class="text-base sm:text-lg text-purple-100/40 leading-relaxed text-balance"
          >
            Master Venus from the ground up. This manual covers everything from
            initial setup to advanced type-safe networking patterns.
          </p>
        </header>

        <section id="quick-start" class="scroll-mt-32 mb-24">
          <div class="mb-8">
            <h2 class="text-2xl font-bold text-white mb-4">Installation</h2>
            <div
              class="btn-command py-4 px-6 mb-8 w-full sm:w-fit flex justify-between items-center gap-4 overflow-hidden"
            >
              <span class="text-purple-400 font-mono mr-2">$</span>
              <span id="command-text" class="truncate font-mono text-sm"
                >npm install @braydev/venus</span
              >

              <button
                id="copy-btn"
                class="ml-4 text-purple-100/30 hover:text-purple-200 transition-all shrink-0 active:scale-90"
                title="Copy command"
              >
                <svg
                  id="icon-copy"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="block"
                >
                  <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                  <path
                    d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"
                  ></path>
                </svg>

                <svg
                  id="icon-check"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="#4ade80"
                  stroke-width="3"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="hidden"
                >
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
              </button>
            </div>

            <QuickStart />
          </div>

          <hr class="border-white/5 mb-24" />

          <section id="method-reference" class="scroll-mt-32">
            <MethodReference />
          </section>
        </section>
      </article>
    </div>
  </div>
  <script>
    const copyBtn = document.getElementById("copy-btn");
    const commandText = document.getElementById("command-text")?.innerText;
    const iconCopy = document.getElementById("icon-copy");
    const iconCheck = document.getElementById("icon-check");

    copyBtn?.addEventListener("click", async () => {
      if (!commandText) return;

      try {
        await navigator.clipboard.writeText(commandText);

        iconCopy?.classList.add("hidden");
        iconCheck?.classList.remove("hidden");
        copyBtn?.classList.replace("text-purple-100/30", "text-green-400");

        setTimeout(() => {
          iconCopy?.classList.remove("hidden");
          iconCheck?.classList.add("hidden");
          copyBtn?.classList.replace("text-green-400", "text-purple-100/30");
        }, 2000);
      } catch (err) {
        console.error("Fallo al copiar:", err);
      }
    });
  </script>
</Layout>
